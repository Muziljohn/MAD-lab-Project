{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addPushTokenListener = addPushTokenListener;\nexports.removePushTokenSubscription = removePushTokenSubscription;\nvar _expoModulesCore = require(\"expo-modules-core\");\nvar _PushTokenManager = _interopRequireDefault(require(\"./PushTokenManager\"));\nvar tokenEmitter = new _expoModulesCore.EventEmitter(_PushTokenManager.default);\nvar newTokenEventName = 'onDevicePushToken';\nfunction addPushTokenListener(listener) {\n  var wrappingListener = function wrappingListener(_ref) {\n    var devicePushToken = _ref.devicePushToken;\n    return listener({\n      data: devicePushToken,\n      type: _expoModulesCore.Platform.OS\n    });\n  };\n  return tokenEmitter.addListener(newTokenEventName, wrappingListener);\n}\nfunction removePushTokenSubscription(subscription) {\n  tokenEmitter.removeSubscription(subscription);\n}","map":{"version":3,"sources":["../src/TokenEmitter.ts"],"names":[],"mappings":";;;;;;AAAA;AAEA;AAMA,IAAM,YAAY,GAAG,IAAI,6BAAY,CAAC,yBAAgB,CAAC;AACvD,IAAM,iBAAiB,GAAG,mBAAmB;AAEvC,SAAU,oBAAoB,CAAC,QAA2B,EAAA;EAC9D,IAAM,gBAAgB,GAAG,SAAnB,gBAAgB;IAAA,IAAM,eAAe,QAAf,eAAe;IAAA,OAEzC,QAAQ,CAAC;MAAE,IAAI,EAAE,eAAe;MAAE,IAAI,EAAE,yBAAQ,CAAC;IAAE,CAAE,CAAC;EAAA;EACxD,OAAO,YAAY,CAAC,WAAW,CAAC,iBAAiB,EAAE,gBAAgB,CAAC;AACtE;AAEM,SAAU,2BAA2B,CAAC,YAA0B,EAAA;EACpE,YAAY,CAAC,kBAAkB,CAAC,YAAY,CAAC;AAC/C","sourcesContent":["import { EventEmitter, Subscription, Platform } from 'expo-modules-core';\n\nimport PushTokenManager from './PushTokenManager';\nimport { DevicePushToken } from './Tokens.types';\n\nexport type PushTokenListener = (token: DevicePushToken) => void;\n\n// Web uses SyntheticEventEmitter\nconst tokenEmitter = new EventEmitter(PushTokenManager);\nconst newTokenEventName = 'onDevicePushToken';\n\nexport function addPushTokenListener(listener: PushTokenListener): Subscription {\n  const wrappingListener = ({ devicePushToken }) =>\n    // @ts-ignore: TS can't decide what Platform.OS is.\n    listener({ data: devicePushToken, type: Platform.OS });\n  return tokenEmitter.addListener(newTokenEventName, wrappingListener);\n}\n\nexport function removePushTokenSubscription(subscription: Subscription) {\n  tokenEmitter.removeSubscription(subscription);\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}